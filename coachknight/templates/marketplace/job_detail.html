{% extends 'base.html' %}

{% block title %}{{ job.title }} - CoachKnight{% endblock %}

{% block content %}
<section class="section" style="padding-top: 6rem;">
    <div class="container" style="max-width: 800px;">
        
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <h1 style="margin-bottom: 0.5rem;">{{ job.title }}</h1>
                    <p class="text-muted mb-0" style="font-size: 1.1rem;">{{ job.vendor.organization_name }}</p>
                </div>
                {% if job.pay_rate_min or job.pay_rate_max %}
                <div class="badge badge-accent" style="font-size: 1rem; padding: 0.5rem 1rem;">
                    üí∞ {% if job.pay_rate_min and job.pay_rate_max %}${{ job.pay_rate_min }}-${{ job.pay_rate_max }}{% elif job.pay_rate_min %}${{ job.pay_rate_min }}+{% else %}Up to ${{ job.pay_rate_max }}{% endif %}/hr
                </div>
                {% endif %}
            </div>
            
            <hr>
            
            <div class="profile-badges mb-3">
                {% if job.town %}<span class="badge">üìç {{ job.town.name }}</span>{% endif %}
                {% if job.day_of_week %}<span class="badge">üìÖ {{ job.get_day_of_week_display }}</span>{% endif %}
                {% if job.age_group %}<span class="badge">üéì {{ job.get_age_group_display }}</span>{% endif %}
                {% if job.num_students %}<span class="badge">üë• {{ job.num_students }} students</span>{% endif %}
                {% if job.start_time and job.end_time %}<span class="badge">‚è∞ {{ job.start_time }} - {{ job.end_time }}</span>{% endif %}
            </div>
            
            {% if job.description %}
            <div class="mb-3">
                <h3>Description</h3>
                <p>{{ job.description }}</p>
            </div>
            {% endif %}
            
            <p class="text-muted" style="font-size: 0.875rem;">Posted {{ job.created_at|date:"M d, Y" }}</p>
            
            {% if request.user.is_authenticated %}
                {% if request.user.userprofile.is_coach %}
                <div style="margin-top: 1.5rem;">
                    <a href="{% url 'messaging:start_vendor_thread' job.vendor.pk %}" class="btn btn-primary">Apply Now</a>
                </div>
                {% elif request.user.userprofile.is_vendor and job.vendor.user_profile == request.user.userprofile %}
                <div style="margin-top: 1.5rem;">
                    <a href="{% url 'marketplace:job_edit' job.pk %}" class="btn btn-primary">Edit Job</a>
                </div>
                {% endif %}
            {% else %}
            <div style="margin-top: 1.5rem;">
                <a href="{% url 'accounts:signup' %}?role=coach" class="btn btn-primary">Sign Up to Apply</a>
            </div>
            {% endif %}
        </div>
        
    </div>
</section>
{% endblock %}
