{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mini Instagram</title>
    <link rel="stylesheet" href="{% static 'style_insta.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>

    {% block content %}{% endblock %}

    <footer>
      <hr>
      <a href="{% url 'mini_insta:show_all_profiles' %}">← All Profiles</a>

      {# If we’re viewing a specific profile, show a link back to it #}
      {% if profile %}
        · <a href="{% url 'mini_insta:show_profile' profile.pk %}">View Profile</a>
      {% endif %}

      {% if request.user.is_authenticated %}
        · <a href="{% url 'mini_insta:my_profile' %}">My Profile</a>
        · <a href="{% url 'mini_insta:show_feed' %}">Feed</a>
        · <a href="{% url 'mini_insta:search' %}">Search</a>

        {# Only the owner sees Update Profile / Create Post #}
        {% if profile and profile.user_id == request.user.id %}
          · <a href="{% url 'mini_insta:update_profile' %}">Update Profile</a>
          · <a href="{% url 'mini_insta:create_post' %}">+ Create Post</a>
        {% endif %}

        {# LOGOUT MUST BE A POST #}
        · <form action="{% url 'mini_insta:logout' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" style="background:none;border:none;padding:0;margin:0;color:blue;cursor:pointer;">
              Logout
            </button>
          </form>
      {% else %}
        · <a href="{% url 'mini_insta:login' %}">Login</a>
        · <a href="{% url 'mini_insta:register' %}">Register</a>
        · <a href="{% url 'mini_insta:create_profile' %}">Create Profile</a>
      {% endif %}
    </footer>
  </body>
</html>
